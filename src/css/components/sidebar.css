/* ======================================
   NitWikit 侧边栏样式
   左侧活动指示条 + 层级缩进
====================================== */

.theme-doc-sidebar-container {
    border: none !important;
    border-right: 1px solid var(--ifm-border-color) !important;
    background-color: color-mix(in srgb, var(--color-surface-1), transparent calc(100% - var(--opacity-glass) * 100%));
    backdrop-filter: var(--backdrop-filter-frosted-glass);
    -webkit-backdrop-filter: var(--backdrop-filter-frosted-glass);
    transition: background-color var(--transition-base);
    display: block;
    min-width: 0;
    flex-shrink: 0;
}

[data-theme="dark"] .theme-doc-sidebar-container {
    background-color: color-mix(in srgb, var(--color-surface-1), transparent calc(100% - var(--opacity-glass) * 100%));
    border-right: 1px solid var(--ifm-border-color) !important;
}

/* ======================================
   菜单容器
====================================== */
.menu {
    padding: 1.5rem 1rem 2rem;
    background-color: transparent;
}

.menu__list {
    margin-bottom: 0.5rem;
    padding-left: 0;
}

.menu__list-item {
    margin: 0.125rem 0;
}

/* ======================================
   菜单链接
====================================== */
.menu__link {
    position: relative;
    border-radius: var(--radius-md);
    font-size: 0.9375rem;
    padding: 0.5rem 0.75rem;
    padding-left: 1rem;
    transition:
        color var(--transition-fast),
        background-color var(--transition-fast);
    line-height: 1.5;
    font-weight: 400;
    color: var(--text-secondary);
}

.menu__link:hover {
    background-color: var(--ifm-menu-color-background-hover);
    color: var(--primary-text);
}

/* 活动状态 - 左侧指示条 */
.menu__link--active {
    font-weight: 500;
    background-color: var(--ifm-menu-color-background-active);
    color: var(--primary-text);
}

.menu__link--active::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 60%;
    background: var(--primary);
    border-radius: 0 2px 2px 0;
}

/* ======================================
   可折叠菜单项
====================================== */
.menu__list-item-collapsible {
    border-radius: var(--radius-md);
    font-weight: 500;
}

.menu__list-item-collapsible:hover {
    background-color: var(--ifm-menu-color-background-hover);
}

.menu__list-item-collapsible--active {
    background-color: var(--ifm-menu-color-background-active);
}

.menu__caret {
    padding: 0.25rem;
}

.menu__caret::before,
.menu__link--sublist-caret::after {
    transition: transform var(--transition-fast);
    opacity: 0.6;
}

/* ======================================
   嵌套菜单
====================================== */
.menu__list .menu__list {
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
    margin-left: 0.75rem;
    padding-left: 0.75rem;
    border-left: 1px solid var(--border);
}

.menu__list .menu__list .menu__link {
    padding: 0.375rem 0.75rem;
    padding-left: 1rem;
    font-size: 0.875rem;
    font-weight: 400;
    color: var(--text-secondary);
}

.menu__list .menu__list .menu__link:hover {
    color: var(--primary-text);
}

.menu__list .menu__list .menu__link--active {
    color: var(--primary-text);
    font-weight: 500;
}

.menu__list .menu__list .menu__link--active::before {
    height: 50%;
}

/* ======================================
   分类标题
====================================== */
.theme-doc-sidebar-menu > .menu__list-item > .menu__link {
    font-weight: 600;
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--text-secondary);
    padding: 0.75rem 0.75rem 0.5rem;
    margin-top: 1rem;
}

.theme-doc-sidebar-menu > .menu__list-item:first-child > .menu__link {
    margin-top: 0;
}

/* ======================================
   移动端侧边栏
====================================== */
@media (max-width: 996px) {
    .theme-doc-sidebar-container {
        border-right: none !important;
    }

    .menu {
        padding: 1rem;
    }

    .menu__link {
        padding: 0.625rem 0.75rem;
        padding-left: 1rem;
        /* 确保触摸目标足够大 */
        min-height: 44px;
        display: flex;
        align-items: center;
    }

    .menu__list-item-collapsible {
        display: flex;
        align-items: center;
        min-height: 44px;
    }

    .menu__list-item-collapsible .menu__link {
        flex: 1;
    }

    .menu__caret {
        padding: 0.5rem;
        min-width: 32px;
        min-height: 32px;
        flex-shrink: 0;
        margin-right: 0.5rem;
    }

    /* 嵌套菜单项也需要足够的触摸区域 */
    .menu__list .menu__list .menu__link {
        min-height: 40px;
        padding: 0.5rem 0.75rem;
        padding-left: 1rem;
    }
}

@media (max-width: 540px) {
    .menu {
        padding: 0.875rem;
    }

    .menu__link {
        font-size: 0.9375rem;
        padding: 0.75rem 0.625rem;
        padding-left: 0.875rem;
    }

    .menu__list .menu__list {
        margin-left: 0.5rem;
        padding-left: 0.625rem;
    }

    .menu__list .menu__list .menu__link {
        font-size: 0.875rem;
        padding: 0.625rem 0.625rem;
        padding-left: 0.875rem;
    }

    /* 分类标题移动端调整 */
    .theme-doc-sidebar-menu > .menu__list-item > .menu__link {
        font-size: 0.75rem;
        padding: 0.625rem 0.625rem 0.375rem;
        margin-top: 0.75rem;
    }
}

/* ======================================
   暗色模式适配
====================================== */
[data-theme="dark"] .menu__list .menu__list {
    border-left-color: var(--border);
}

/* Catch Docusaurus hashed classes for Sidebar Logo */
[class*="sidebarLogo"],
/* Fallback for the image itself if container isn't caught */
.theme-doc-sidebar-container img[alt="Logo"],
/* Target the link wrapper specifically */
a[class*="sidebarLogo"],
/* Target the bold text inside */
a[class*="sidebarLogo"] b,
/* Target the image inside */
a[class*="sidebarLogo"] img {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    width: 0 !important;
    height: 0 !important;
    pointer-events: none !important;
}
